# 总体设计文档

## 1. 引言

本文档旨在描述书店管理系统的总体设计。该系统面向三类人员：顾客、销售人员和店长。系统提供了图书查询、购买、进货、图书信息录入、图书信息修改、用户创建等功能，以满足不同角色的需求。

## 2. 功能设计

### 2.1 模块概述

- 用户模块：处理用户的注册、登录和权限管理。
- 图书模块：处理图书的查询、购买和库存管理。
- 进货模块：处理图书的进货操作。
- 图书信息管理模块：处理图书信息的录入和修改。
- 报表模块：生成采购信息、销售情况和盈利信息的报表。
- 日志模块：记录系统的操作日志。

### 2.2 功能结构图

```mermaid
A[用户模块] -->|注册账户| B(注册)
A -->|登录账户| C(登录)
B -->|创建用户| D(创建用户)
C -->|验证用户| E(验证用户)
F[图书模块] -->|查询图书| G(查询)
F -->|购买图书| H(购买)
G -->|输出图书信息| I(输出图书信息)
H -->|更新库存| J(更新库存)
K[进货模块] -->|进货操作| L(进货)
L -->|更新库存| M(更新库存)
N[图书信息管理模块] -->|录入图书信息| O(录入信息)
N -->|修改图书信息| P(修改信息)
Q[报表模块] -->|生成采购报表| R(生成采购报表)
Q -->|生成销售报表| S(生成销售报表)
Q -->|生成盈利报表| T(生成盈利报表)
U[日志模块] -->|记录操作日志| V(记录日志)
```

## 3. 用户交互设计

系统使用命令行进行交互，以下是用户的命令格式和对应的输出：

- 注册账户：
  - 命令格式：register <用户名> <密码>
  - 输出：注册成功/失败的消息提示

- 登录账户：
  - 命令格式：login <用户名> <密码>
  - 输出：登录成功/失败的消息提示

- 查询图书：
  - 命令格式：search <查询条件>
  - 输出：符合查询条件的图书信息列表

- 购买图书：
  - 命令格式：buy <ISBN号> <购买数量>
  - 输出：购买成功/失败的消息提示

- 进货操作：
  - 命令格式：purchase <ISBN号> <进货数量> <进货价格>
  - 输出：进货成功/失败的消息提示

- 录入图书信息：
  - 命令格式：addbook <ISBN号> <书名> <作者> <关键字> <库存量> <单价>
  - 输出：图书信息录入成功/失败的消息提示

## 4. 数据库设计

系统使用文件进行数据存储，具体的数据库设计如下：

- 用户数据文件：存储用户的账户信息，包括用户名、密码和权限级别。
- 图书数据文件：存储图书的信息，包括ISBN号、书名、作者、关键字、库存量和单价。
- 采购记录文件：存储图书的进货记录，包括ISBN号、进货数量和进货价格。
- 销售记录文件：存储图书的销售记录，包括ISBN号、销售数量和销售价格。
- 操作日志文件：记录系统的操作日志，包括操作类型、操作对象和操作时间等信息。

## 5. 类、结构体设计

系统的类、结构体设计如下：

- 用户类（User）：
  - 属性：用户名、密码、权限级别
  - 方法：登录、注销

- 顾客类（Customer）：
  - 继承关系：用户类
  - 方法：查询图书、购买图书

- 销售人员类（Salesperson）：
  - 继承关系：用户类
  - 方法：执行顾客操作、进货、录入图书信息

- 店长类（Manager）：
  - 继承关系：用户类
  - 方法：执行销售人员和顾客操作、查询采购信息、查询销售情况、查询盈利信息、查看员工工作情况报告、查看系统整体工作日志

- 图书类（Book）：
  - 属性：ISBN号、书名、作者、关键字、库存量、单价
  - 方法：获取图书信息

## 6. 总结

本文档详细描述了书店管理系统的总体设计，包括功能设计、用户交互设计、数据库设计和类、结构体设计。该总体设计为后续的源代码实现和系统部署提供了指导和规范。通过合理的模块划分和命令行交互设计，以及有效的数据存储方式和类设计，可以实现系统的各项功能，并满足不同角色的需求。